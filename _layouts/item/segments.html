---
# generic fallback item page layout
# displays image or icon depending on "image_thumb"
layout: item/item-page-base
custom-foot: segments/js/segments-js.html
---
{%- comment -%} Determine if segments filename is the objectid of the item or if it is determined by the metadata's object-segments field {%- endcomment -%}
{% if page.object-segments contains ".csv"%}
  {% assign segment-data = page.object-segments | remove: ".csv" %}
  {% assign items = site.data.segments[segment-data] %}
{% elsif page.object-segments %}
  {% assign items = site.data.segments[page.object-segments] %}
{% else %}
  {% assign items = site.data.segments[page.objectid] %}
{% endif %}

{%- comment -%} determine AV component (if there is one) {%- endcomment -%}
{% if page.object_location contains 'vimeo' %}
  {% assign av = "vimeo" %}
  {% assign vimeo_id = page.object_location | split: '/' | last %}
{%- elsif page.object_location contains 'youtu' -%}
  {% assign av = "youtube" %}
  {% assign youtube_id = page.object_location | split: '/' | last %}
  {% if youtube_id contains 'v=' %}{% assign youtube_id = youtube_id | split: 'v=' | last | split: '&' | first %}
  {% elsif youtube_id contains '?' %}{% assign youtube_id = youtube_id | split: '?' | first %}
  {% endif %}
{%- elsif page.object_location contains 'mp3' -%}
  {% assign av = "mp3" %}
{%- elsif page.object_location contains 'soundcloud' -%}
  {% assign av = "soundcloud" %}
  {% assign soundcloud_id = page.object_location | split: '.com/' | last %}
{%endif%}

<div id="upper-content">
  {% if site.data.theme.media-scroll == true %}
    {% include segments/style/media-scroll-wrapper.html %}
  {% endif %}
  {% if av %}
    {% include segments/item/av.html %}
  {% endif %}
  <div id="transcript-metadata">
    {% include segments/item/segment-metadata.html %}
  </div>
</div>

{% include segments/item/segments.html %}
  
